const e=window.NbComponent.h;class t{constructor(){this.scrollTop=0,this.selectIndex=0,this.align="center",this.items=[{key:1,label:"选项1"},{key:2,label:"选项2"},{key:3,label:"选项3"},{key:4,label:"选项4"},{key:5,label:"选项5"},{key:6,label:"选项6"},{key:7,label:"选项7"},{key:8,label:"选项8"},{key:9,label:"选项9"}]}async getCurrentItem(){return this.items.filter(e=>e.key===this.currentKey)[0]||{}}handleScroll(){this.selectIndex=Math.round(this.$wrapper.scrollTop/this.itemHeight),this.scrollTop=this.$wrapper.scrollTop,this.rescroll(this.scrollTop)}rescroll(e){this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{if(e!==this.scrollTop)return this.rescroll(this.scrollTop);{const e=Math.round(this.scrollTop/this.itemHeight);this.$wrapper.scrollTop=e*this.itemHeight,this.currentKey=this.items[e].key,this.selectIndex=e,console.log("滚动停止",e+1)}},100)}setItemHeight(){this.itemHeight=Math.round(this.$itemListInvisible.scrollHeight/this.items.length),console.log("itemHeight",this.itemHeight)}async setDefaultItem(){if(this.defaultKey){const e=await this.getCurrentItem();this.selectIndex=this.items.indexOf(e),this.$wrapper.scrollTop=this.selectIndex*this.itemHeight}}get $wrapper(){return this.el.shadowRoot.querySelector(".wrapper")}render(){return e("div",{class:"roll-picker",style:{width:"25%",textAlign:"center"}},e("div",{class:"wrapper",onScroll:this.handleScroll.bind(this)},e("ul",{class:"item-list",ref:e=>this.$itemList=e},this.items.map((t,s)=>e("li",{key:t.key,class:`offset-${this.selectIndex-s}`},t.label))),e("ul",{class:"item-list invisible",ref:e=>this.$itemListInvisible=e},this.items.map(t=>e("li",{key:t.key},t.label)))),e("div",{class:"select-box"}))}componentDidLoad(){this.currentKey=this.defaultKey,this.setItemHeight(),this.setDefaultItem()}static get is(){return"nb-roll-picker"}static get encapsulation(){return"shadow"}static get properties(){return{align:{type:String,attr:"align"},currentKey:{state:!0},defaultKey:{type:Number,attr:"default-key"},el:{elementRef:!0},getCurrentItem:{method:!0},items:{type:"Any",attr:"items"},selectIndex:{state:!0}}}static get style(){return".roll-picker{position:relative;display:inline-block;height:4.666666666666667rem;overflow-x:hidden}.roll-picker .wrapper{position:absolute;top:0;left:0;height:100%;width:calc(100% + 6px);overflow-y:scroll;-webkit-transition:transform .1s ease;transition:transform .1s ease;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.roll-picker .wrapper::-webkit-scrollbar{width:0}.roll-picker .wrapper::-webkit-scrollbar-thumb{background-color:none}.roll-picker .wrapper .item-list{list-style:none;margin:0 0 0 -3px;padding:1.866666666666667rem 0}.roll-picker .wrapper .item-list li{height:.9333333333333333rem;line-height:.9333333333333333rem;visibility:hidden;opacity:0}.roll-picker .wrapper .item-list li.offset-0{font-size:.64rem;line-height:.9333333333333333rem;visibility:visible;opacity:1}.roll-picker .wrapper .item-list li.offset-1,.roll-picker .wrapper .item-list li.offset-2,.roll-picker .wrapper .item-list li.offset-3,.roll-picker .wrapper .item-list li.offset--1,.roll-picker .wrapper .item-list li.offset--2,.roll-picker .wrapper .item-list li.offset--3{color:rgba(51,51,51,.5);font-size:.5066666666666667rem;visibility:visible;opacity:1}.roll-picker .wrapper .item-list li.offset-1{-webkit-transform:translateY(.06666666666666667rem);transform:translateY(.06666666666666667rem)}.roll-picker .wrapper .item-list li.offset--1{-webkit-transform:translateY(-.06666666666666667rem);transform:translateY(-.06666666666666667rem)}.roll-picker .wrapper .item-list li.offset-2,.roll-picker .wrapper .item-list li.offset--2{font-size:.4rem}.roll-picker .wrapper .item-list li.offset-2{-webkit-transform:translateY(.4rem);transform:translateY(.4rem)}.roll-picker .wrapper .item-list li.offset--2{-webkit-transform:translateY(-.4rem);transform:translateY(-.4rem)}.roll-picker .wrapper .item-list li.offset-3,.roll-picker .wrapper .item-list li.offset--3{font-size:.29333333333333333rem}.roll-picker .wrapper .item-list li.offset-3{-webkit-transform:translateY(.8rem);transform:translateY(.8rem)}.roll-picker .wrapper .item-list li.offset--3{-webkit-transform:translateY(-.8rem);transform:translateY(-.8rem)}.roll-picker .wrapper .item-list.invisible{position:absolute;top:0;left:0;padding:0;visibility:hidden}.roll-picker .select-box{position:absolute;left:0;top:1.866666666666667rem;width:calc(100% - 2px);height:.9333333333333333rem;border:1px solid #d9d9d9;pointer-events:none}"}}export{t as NbRollPicker};