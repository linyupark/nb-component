NbComponent.loadBundle("2sstlvlw",["exports"],function(e){var t=window.NbComponent.h,n=0,o=function(){function e(){var e=this;this.enable=!0,this.dampHeight=30,this.positionSave=!0,this.dampingLen=0,this.loading=!1,this.handleTouchStart=function(t){e.startPageY=t.touches[0].pageY},this.handleTouchMove=function(t){e.movePageY=t.touches[0].pageY,e.enable&&(e.loading||(e.recordStartDampLen(),e.startDampLen>0&&"refresh"!==e.disable&&(e.pullLength>e.startDampLen?(e.dampingLen=e.pullLength-e.startDampLen,e.dampingLen>e.dampHeight&&(e.dampingLen=e.dampHeight)):e.pullLength+3<e.startDampLen&&(e.dampingLen=0)),e.startDampLen<0&&"more"!==e.disable&&(e.pullLength<e.startDampLen?(e.dampingLen=e.pullLength+e.startDampLen,e.dampingLen<-e.dampHeight&&(e.dampingLen=-e.dampHeight)):e.pullLength-3>e.startDampLen&&(e.dampingLen=0)),0!==e.startDampLen&&(e.$content.style.webkitTransition="transform 0.3s",e.$content.style.webkitTransform="translateY("+e.dampingLen+"px)")))},this.handleTouchEnd=function(){e.startDampLen=null,Math.abs(e.dampingLen)>3&&(e.loading=!0),e.dampingLen>3&&e.refresh.emit(),e.dampingLen<-3&&e.more.emit(),e.positionSave&&(n=e.getScrollTop())}}return e.prototype.done=function(){this.$content.style.transform="translateY(0px)",this.dampingLen=0,this.loading=!1},Object.defineProperty(e.prototype,"pullLength",{get:function(){return this.movePageY-this.startPageY},enumerable:!0,configurable:!0}),e.prototype.getScrollTop=function(){return this.$wrapper.scrollTop},e.prototype.getWrapperScrollTop=function(){return this.$wrapper.scrollHeight-this.$wrapper.clientHeight},e.prototype.recordStartDampLen=function(){this.startDampLen||(0===this.getScrollTop()&&this.pullLength>0||this.getScrollTop()===this.getWrapperScrollTop()&&this.pullLength<0)&&(this.startDampLen=this.pullLength)},e.prototype.bindTouchScroll=function(e){void 0===e&&(e=!0);try{this.$wrapper=document.querySelector(this.wrapperSelector),this.$content=document.querySelector(this.contentSelector)}catch(e){throw console.log(e),new TypeError('"wrapperSelector" or "contentSelector" props maybe not a valid scroll dom selector.')}e?(this.$wrapper.addEventListener("touchstart",this.handleTouchStart,!1),this.$wrapper.addEventListener("touchmove",this.handleTouchMove,!1),this.$wrapper.addEventListener("touchend",this.handleTouchEnd,!1)):(this.$wrapper.removeEventListener("touchstart",this.handleTouchStart,!1),this.$wrapper.removeEventListener("touchmove",this.handleTouchMove,!1),this.$wrapper.removeEventListener("touchend",this.handleTouchEnd,!1))},e.prototype.componentDidLoad=function(){this.bindTouchScroll(),this.positionSave&&(this.$wrapper.scrollTop=n)},e.prototype.componentDidUnload=function(){console.log("unbind pull-to-do touch event.",this.$wrapper),this.bindTouchScroll(!1)},e.prototype.render=function(){return t("div",{class:"pull-to-do"},t("div",{class:this.dampingLen>.8*this.dampHeight&&this.enable?"show":"hide"},t("div",{class:this.loading?"show":"hide"},t("slot",{name:"refresh-loading"})),t("div",{class:this.loading?"hide":"show"},t("slot",{name:"refresh"}))),t("slot",{name:"main"}),t("div",{class:"bottom "+(this.dampingLen<.8*-this.dampHeight&&this.enable?"show":"hide")},t("div",{class:this.loading?"show":"hide"},t("slot",{name:"more-loading"})),t("div",{class:this.loading?"hide":"show"},t("slot",{name:"more"}))))},Object.defineProperty(e,"is",{get:function(){return"nb-pull-to-do"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{contentSelector:{type:String,attr:"content-selector"},dampHeight:{type:Number,attr:"damp-height"},dampingLen:{state:!0},disable:{type:String,attr:"disable"},done:{method:!0},el:{elementRef:!0},enable:{type:Boolean,attr:"enable"},loading:{state:!0},positionSave:{type:Boolean,attr:"position-save"},wrapperSelector:{type:String,attr:"wrapper-selector"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"refresh",method:"refresh",bubbles:!0,cancelable:!0,composed:!0},{name:"more",method:"more",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".pull-to-do.sc-nb-pull-to-do{position:relative}.pull-to-do.sc-nb-pull-to-do   .hide.sc-nb-pull-to-do, .pull-to-do.sc-nb-pull-to-do   .show.sc-nb-pull-to-do{position:absolute;width:100%;top:0;opacity:1;z-index:2;-webkit-transition:opacity .3s;transition:opacity .3s}.pull-to-do.sc-nb-pull-to-do   .hide.sc-nb-pull-to-do{opacity:0;z-index:-1}.pull-to-do.sc-nb-pull-to-do   .bottom.sc-nb-pull-to-do{top:auto;bottom:0}"},enumerable:!0,configurable:!0}),e}();e.NbPullToDo=o,Object.defineProperty(e,"__esModule",{value:!0})});