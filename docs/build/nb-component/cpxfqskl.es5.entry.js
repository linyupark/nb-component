var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,l){function o(e){try{a(n.next(e))}catch(e){l(e)}}function s(e){try{a(n.throw(e))}catch(e){l(e)}}function a(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}a((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var r,n,i,l,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}};NbComponent.loadBundle("cpxfqskl",["exports"],function(e){var t=window.NbComponent.h,r=function(){function e(){this.scrollTop=0,this.selectIndex=0,this.align="center",this.items=[{key:1,label:"选项1"},{key:2,label:"选项2"},{key:3,label:"选项3"},{key:4,label:"选项4"},{key:5,label:"选项5"},{key:6,label:"选项6"},{key:7,label:"选项7"},{key:8,label:"选项8"},{key:9,label:"选项9"}]}return e.prototype.getCurrentItem=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,this.items.filter(function(t){return t.key===e.currentKey})[0]||{}]})})},e.prototype.handleScroll=function(){this.selectIndex=Math.round(this.$wrapper.scrollTop/this.itemHeight),this.scrollTop=this.$wrapper.scrollTop,this.rescroll(this.scrollTop)},e.prototype.rescroll=function(e){var t=this;this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(){if(e!==t.scrollTop)return t.rescroll(t.scrollTop);var r=Math.round(t.scrollTop/t.itemHeight);t.$wrapper.scrollTop=r*t.itemHeight,t.currentKey=t.items[r].key,t.selectIndex=r,console.log("滚动停止",r+1)},100)},e.prototype.setItemHeight=function(){this.itemHeight=Math.round(this.$itemListInvisible.scrollHeight/this.items.length),console.log("itemHeight",this.itemHeight)},e.prototype.setDefaultItem=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.defaultKey?[4,this.getCurrentItem()]:[3,2];case 1:e=t.sent(),this.selectIndex=this.items.indexOf(e),this.$wrapper.scrollTop=this.selectIndex*this.itemHeight,t.label=2;case 2:return[2]}})})},Object.defineProperty(e.prototype,"$wrapper",{get:function(){return this.el.shadowRoot.querySelector(".wrapper")},enumerable:!0,configurable:!0}),e.prototype.render=function(){var e=this;return t("div",{class:"roll-picker",style:{width:"25%",textAlign:"center"}},t("div",{class:"wrapper",onScroll:this.handleScroll.bind(this)},t("ul",{class:"item-list",ref:function(t){return e.$itemList=t}},this.items.map(function(r,n){return t("li",{key:r.key,class:"offset-"+(e.selectIndex-n)},r.label)})),t("ul",{class:"item-list invisible",ref:function(t){return e.$itemListInvisible=t}},this.items.map(function(e){return t("li",{key:e.key},e.label)}))),t("div",{class:"select-box"}))},e.prototype.componentDidLoad=function(){this.currentKey=this.defaultKey,this.setItemHeight(),this.setDefaultItem()},Object.defineProperty(e,"is",{get:function(){return"nb-roll-picker"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{align:{type:String,attr:"align"},currentKey:{state:!0},defaultKey:{type:Number,attr:"default-key"},el:{elementRef:!0},getCurrentItem:{method:!0},items:{type:"Any",attr:"items"},selectIndex:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".roll-picker{position:relative;display:inline-block;height:4.666666666666667rem;overflow-x:hidden}.roll-picker .wrapper{position:absolute;top:0;left:0;height:100%;width:calc(100% + 6px);overflow-y:scroll;-webkit-transition:transform .1s ease;transition:transform .1s ease;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.roll-picker .wrapper::-webkit-scrollbar{width:0}.roll-picker .wrapper::-webkit-scrollbar-thumb{background-color:none}.roll-picker .wrapper .item-list{list-style:none;margin:0 0 0 -3px;padding:1.866666666666667rem 0}.roll-picker .wrapper .item-list li{height:.9333333333333333rem;line-height:.9333333333333333rem;visibility:hidden;opacity:0}.roll-picker .wrapper .item-list li.offset-0{font-size:.64rem;line-height:.9333333333333333rem;visibility:visible;opacity:1}.roll-picker .wrapper .item-list li.offset-1,.roll-picker .wrapper .item-list li.offset-2,.roll-picker .wrapper .item-list li.offset-3,.roll-picker .wrapper .item-list li.offset--1,.roll-picker .wrapper .item-list li.offset--2,.roll-picker .wrapper .item-list li.offset--3{color:rgba(51,51,51,.5);font-size:.5066666666666667rem;visibility:visible;opacity:1}.roll-picker .wrapper .item-list li.offset-1{-webkit-transform:translateY(.06666666666666667rem);transform:translateY(.06666666666666667rem)}.roll-picker .wrapper .item-list li.offset--1{-webkit-transform:translateY(-.06666666666666667rem);transform:translateY(-.06666666666666667rem)}.roll-picker .wrapper .item-list li.offset-2,.roll-picker .wrapper .item-list li.offset--2{font-size:.4rem}.roll-picker .wrapper .item-list li.offset-2{-webkit-transform:translateY(.4rem);transform:translateY(.4rem)}.roll-picker .wrapper .item-list li.offset--2{-webkit-transform:translateY(-.4rem);transform:translateY(-.4rem)}.roll-picker .wrapper .item-list li.offset-3,.roll-picker .wrapper .item-list li.offset--3{font-size:.29333333333333333rem}.roll-picker .wrapper .item-list li.offset-3{-webkit-transform:translateY(.8rem);transform:translateY(.8rem)}.roll-picker .wrapper .item-list li.offset--3{-webkit-transform:translateY(-.8rem);transform:translateY(-.8rem)}.roll-picker .wrapper .item-list.invisible{position:absolute;top:0;left:0;padding:0;visibility:hidden}.roll-picker .select-box{position:absolute;left:0;top:1.866666666666667rem;width:calc(100% - 2px);height:.9333333333333333rem;border:1px solid #d9d9d9;pointer-events:none}"},enumerable:!0,configurable:!0}),e}();e.NbRollPicker=r,Object.defineProperty(e,"__esModule",{value:!0})});