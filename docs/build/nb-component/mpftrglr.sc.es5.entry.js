NbComponent.loadBundle("mpftrglr",["exports"],function(t){var e=window.NbComponent.h,n=0,i=function(){function t(){this.enable=!0,this.dampHeight=30,this.positionSave=!0,this.dampingLen=0,this.loading=!1}return t.prototype.done=function(){this.$content.style.transform="translateY(0px)",this.dampingLen=0,this.loading=!1},Object.defineProperty(t.prototype,"pullLength",{get:function(){return this.movePageY-this.startPageY},enumerable:!0,configurable:!0}),t.prototype.getScrollTop=function(){return this.$wrapper.scrollTop},t.prototype.getWrapperScrollTop=function(){return this.$wrapper.scrollHeight-this.$wrapper.clientHeight},t.prototype.recordStartDampLen=function(){this.startDampLen||(0===this.getScrollTop()&&this.pullLength>0||this.getScrollTop()===this.getWrapperScrollTop()&&this.pullLength<0)&&(this.startDampLen=this.pullLength)},t.prototype.handleTouchStart=function(t){this.startPageY=t.touches[0].pageY},t.prototype.handleTouchMove=function(t){this.movePageY=t.touches[0].pageY,this.enable&&(this.loading||(this.recordStartDampLen(),this.startDampLen>0&&"refresh"!==this.disable&&(this.pullLength>this.startDampLen?(this.dampingLen=this.pullLength-this.startDampLen,this.dampingLen>this.dampHeight&&(this.dampingLen=this.dampHeight)):this.pullLength+3<this.startDampLen&&(this.dampingLen=0)),this.startDampLen<0&&"more"!==this.disable&&(this.pullLength<this.startDampLen?(this.dampingLen=this.pullLength+this.startDampLen,this.dampingLen<-this.dampHeight&&(this.dampingLen=-this.dampHeight)):this.pullLength-3>this.startDampLen&&(this.dampingLen=0)),0!==this.startDampLen&&(this.$content.style.webkitTransition="transform 0.3s",this.$content.style.webkitTransform="translateY("+this.dampingLen+"px)")))},t.prototype.handleTouchEnd=function(){this.startDampLen=null,Math.abs(this.dampingLen)>3&&(this.loading=!0),this.dampingLen>3&&this.refresh.emit(),this.dampingLen<-3&&this.more.emit(),this.positionSave&&(n=this.getScrollTop())},t.prototype.bindTouchScroll=function(t){if(void 0===t&&(t=!0),t)try{this.$wrapper=document.querySelector(this.wrapperSelector),this.$content=document.querySelector(this.contentSelector),this.$wrapper.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),this.$wrapper.addEventListener("touchmove",this.handleTouchMove.bind(this),!1),this.$wrapper.addEventListener("touchend",this.handleTouchEnd.bind(this),!1)}catch(t){throw console.log(t),new TypeError('"wrapperSelector" or "contentSelector" props maybe not a valid scroll dom selector.')}},t.prototype.componentDidLoad=function(){this.bindTouchScroll(),this.positionSave&&this.$wrapper.scrollTo(0,n)},t.prototype.render=function(){return e("div",{class:"pull-to-do"},e("div",{class:this.dampingLen>.8*this.dampHeight&&this.enable?"show":"hide"},e("div",{class:this.loading?"show":"hide"},e("slot",{name:"refresh-loading"})),e("div",{class:this.loading?"hide":"show"},e("slot",{name:"refresh"}))),e("slot",{name:"main"}),e("div",{class:"bottom "+(this.dampingLen<.8*-this.dampHeight&&this.enable?"show":"hide")},e("div",{class:this.loading?"show":"hide"},e("slot",{name:"more-loading"})),e("div",{class:this.loading?"hide":"show"},e("slot",{name:"more"}))))},Object.defineProperty(t,"is",{get:function(){return"nb-pull-to-do"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{contentSelector:{type:String,attr:"content-selector"},dampHeight:{type:Number,attr:"damp-height"},dampingLen:{state:!0},disable:{type:String,attr:"disable"},done:{method:!0},el:{elementRef:!0},enable:{type:Boolean,attr:"enable"},loading:{state:!0},positionSave:{type:Boolean,attr:"position-save"},wrapperSelector:{type:String,attr:"wrapper-selector"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"refresh",method:"refresh",bubbles:!0,cancelable:!0,composed:!0},{name:"more",method:"more",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".pull-to-do.sc-nb-pull-to-do{position:relative}.pull-to-do.sc-nb-pull-to-do   .hide.sc-nb-pull-to-do, .pull-to-do.sc-nb-pull-to-do   .show.sc-nb-pull-to-do{position:absolute;width:100%;top:0;opacity:1;z-index:2;-webkit-transition:opacity .3s;transition:opacity .3s}.pull-to-do.sc-nb-pull-to-do   .hide.sc-nb-pull-to-do{opacity:0;z-index:-1}.pull-to-do.sc-nb-pull-to-do   .bottom.sc-nb-pull-to-do{top:auto;bottom:0}"},enumerable:!0,configurable:!0}),t}();t.NbPullToDo=i,Object.defineProperty(t,"__esModule",{value:!0})});